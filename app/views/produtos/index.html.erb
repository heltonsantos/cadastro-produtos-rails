<h1>Produtos</h1>
<h4><%= link_to 'Inicio', produtos_path %></h4>
<h4><%= link_to 'Cadastrar novo produto', new_produto_path %></h4>

<p><%= link_to 'Criar Relatório', report_produtos_path %></p>

<p><%= link_to("Baixar Relatório", produtos_path(@produtos, format: :csv), 
class: "btn btn-success") %></p>

<p>
<%= form_for :search_produtos, url: produtos_path, method: :get do |form| %>
  <%= form.text_field :query, value: params[:search_produtos].presence && params[:search_produtos][:query] %>
  <%= form.submit 'Buscar' %>
<% end %>
</p>

<% unless @produtos.nil? %>
  <% if @produtos.empty? %>
    <h2>Nenhum produto foi encontrado.</h2>
  <% else %>
    <table>
      <tr>
        <th>SKU</th>
        <th>Nome</th>
        <th>Descrição</th>
        <th colspan="3">Ações</th>
      </tr>
     
      <% @produtos.each do |produto| %>
        <tr>
          <td><b><%= produto.sku %></b></td>
          <td><%= produto.nome %></td>
          <td><i><%= produto.descricao %></i></td>
          <td><%= link_to 'Ver', produto_path(produto.id) %></td>
          <td><%= link_to 'Editar', edit_produto_path(produto.id) %></td>
          <td><%= link_to 'Deletar', produto_path(produto.id),
                  method: :delete,
                  data: { confirm: 'Are you sure?' } %></td>
        </tr>
        </tr>
      <% end %>
    </table>
 <% end %>
<% end %>    